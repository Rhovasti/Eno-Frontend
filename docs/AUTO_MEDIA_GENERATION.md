# Auto-Media Generation Guide

## ðŸŽ¨ðŸŽµ Overview

The Auto-Media Generation system uses AI to automatically create images and audio for your game posts. Simply write your narrative content, select a mood, and let the AI generate appropriate media that matches your story.

## âœ¨ Quick Start

1. **Write your post content** in the text editor (Finnish or English supported)
2. **Check the boxes** for what you want to generate:
   - âœ… ðŸŽ¨ Luo AI-kuva (Generate AI image)
   - âœ… ðŸŽµ Luo AI-Ã¤Ã¤ni (Generate AI audio)
3. **Select a mood** that matches your scene from the dropdown
4. **Submit your post** - media generates automatically in the background!

## ðŸŽ­ How It Works

### AI Analysis
When you submit a post with auto-generation enabled:

1. **Content Analysis**: Claude AI analyzes your post content
2. **Element Extraction**: Identifies key elements:
   - ðŸ“ **Locations**: castles, forests, caves, cities
   - ðŸ‘¥ **Characters**: mentioned people or creatures
   - âš”ï¸ **Actions**: battles, conversations, journeys
   - ðŸŒ… **Time/Atmosphere**: day/night, weather, mood
3. **Prompt Generation**: Creates optimized prompts for:
   - ðŸ–¼ï¸ **Image**: Visual scene description
   - ðŸŽµ **Audio**: Atmospheric soundscape
4. **Style Application**: Applies your selected mood to both media types
5. **Generation & Upload**: Creates media and uploads to cloud storage

### Language Support
- **Finnish**: Automatically translates to English for AI processing
- **English**: Processes directly
- **Mixed**: Handles content with both languages

Common Finnish fantasy terms are recognized:
- velho â†’ wizard
- lohikÃ¤Ã¤rme â†’ dragon
- linna â†’ castle
- pimeÃ¤ luola â†’ dark cave
- metsÃ¤ â†’ forest

## ðŸŽ¨ Mood Guide

Choose the mood that best matches your scene's atmosphere:

### ðŸŒ‘ Mysterious / Dark
- **Image Style**: Fantasy art with shadows and mystique
- **Audio Style**: Dark ambient soundscapes
- **Best For**: Secrets, investigations, supernatural encounters
- **Example**: "Tutkimme hÃ¤mÃ¤rÃ¤Ã¤ hautakammiota soihtujen valossa"

### ðŸ•Šï¸ Peaceful / Calm
- **Image Style**: Digital art with soft colors
- **Audio Style**: Acoustic ambient, gentle sounds
- **Best For**: Serene moments, rest, contemplation
- **Example**: "Leiriydymme rauhallisen jÃ¤rven rannalle auringonlaskussa"

### âš”ï¸ Exciting / Action
- **Image Style**: Cinematic, dynamic composition
- **Audio Style**: Orchestral music with intensity
- **Best For**: Combat, chases, intense moments
- **Example**: "Soturi hyÃ¶kkÃ¤Ã¤ lohikÃ¤Ã¤rmeen kimppuun miekka kÃ¤dessÃ¤"

### ðŸŽ­ Dramatic / Tense
- **Image Style**: 3D render with dramatic lighting
- **Audio Style**: Dark orchestral, building tension
- **Best For**: Conflicts, revelations, turning points
- **Example**: "Paljastamme petturin kuninkaan neuvoston edessÃ¤"

### ðŸ˜„ Humorous / Light
- **Image Style**: Comic book style, vibrant colors
- **Audio Style**: Whimsical music with playful elements
- **Best For**: Comedy, silly moments, lighthearted scenes
- **Example**: "KÃ¤Ã¤piÃ¶ yrittÃ¤Ã¤ vakuuttaa Ã¶rkille, ettÃ¤ hÃ¤n on myÃ¶s Ã¶rkki"

### ðŸ”ï¸ Epic / Heroic
- **Image Style**: Cinematic with grand scale
- **Audio Style**: Epic orchestral with choir
- **Best For**: Major victories, heroic moments, grand scenes
- **Example**: "Sankarit seisovat linnan muurilla voiton jÃ¤lkeen"

### ðŸ’• Romantic / Emotional
- **Image Style**: Anime-inspired, soft aesthetic
- **Audio Style**: Emotional piano and strings
- **Best For**: Love, friendship, emotional connections
- **Example**: "Kaksi rakastavaista tanssii kuutamon valossa"

### ðŸ‘» Horrific / Scary
- **Image Style**: Horror art, dark and unsettling
- **Audio Style**: Horror ambient with drones
- **Best For**: Terror, dread, supernatural horror
- **Example**: "Kummitus ilmestyy pimeÃ¤n kÃ¤ytÃ¤vÃ¤n pÃ¤Ã¤ssÃ¤"

## ðŸ’¡ Tips for Best Results

### Writing for AI Generation

**âœ… DO:**
- **Be specific with locations**: "pimeÃ¤ssÃ¤ luolassa" instead of "paikassa"
- **Describe visual details**: "kultainen kruunu", "liekehtivÃ¤ miekka"
- **Include atmosphere**: "myrskyisÃ¤ yÃ¶", "aurinkoinen aamupÃ¤ivÃ¤"
- **Mention key characters**: "Soturi Thorin", "Velho Merlin"
- **Use action verbs**: "hyÃ¶kkÃ¤Ã¤", "loitsii", "pakenee"

**âŒ AVOID:**
- Abstract concepts without context: "olemassaolo", "ajatus"
- Meta references: "heitetÃ¤Ã¤n noppaa", "pelaaja pÃ¤Ã¤ttÃ¤Ã¤"
- Too vague: "jotain tapahtuu", "he menevÃ¤t johonkin"
- Multiple disconnected scenes in one post

### Content Length
- **Optimal**: 50-200 words
- **Minimum**: 20 words (needs enough context)
- **Maximum**: 500 words (AI extracts key elements)

### Example Good Posts

**Action Scene (Finnish):**
```
Soturi Thorin hyÃ¶kkÃ¤Ã¤ Ã¶rkkilÃ¤isten kimppuun linnan portilla.
HÃ¤nen miekkansa loistaa hopeisessa kuutamon valossa, kun hÃ¤n
torjuu nuolia ja taistelee eteenpÃ¤in. Ã–rkit huutavat ja vetÃ¤ytyvÃ¤t
hÃ¤nen edestÃ¤Ã¤n, pelÃ¤styneinÃ¤ sankarimme voimasta.
```

**Atmospheric Scene (English):**
```
The ancient library stands silent in the moonlight. Dust dances
in silver beams filtering through broken stained glass. The scent
of old leather and parchment fills the air. Somewhere in the
darkness, something moves between the towering shelves.
```

## ðŸ”§ Troubleshooting

### Images Don't Match Post Content

**Problem**: Generated image doesn't reflect what you wrote
**Solutions**:
- Add more specific visual descriptions to your post
- Mention the location explicitly ("linnassa", "metsÃ¤ssÃ¤")
- Describe what characters are doing visually
- Try a different mood that better fits the scene

### Audio Feels Wrong

**Problem**: Audio too intense/calm for the scene
**Solutions**:
- Choose a different mood preset
- Add atmospheric descriptions to your post ("rauhallinen", "jÃ¤nnittÃ¤vÃ¤")
- Remember: Mood affects both image AND audio generation

### Finnish Translation Issues

**Problem**: Some words don't translate correctly
**Solutions**:
- Use common fantasy terms from the translation dictionary
- Mix in English for specialized terms
- Keep sentences relatively simple
- Use descriptive phrases rather than rare words

### Generation Takes Too Long

**Normal Times**:
- Images: 20-40 seconds
- Audio: 30-60 seconds

**If longer**:
- Server may be busy with multiple requests
- Complex prompts take longer
- Check your internet connection
- Refresh page if >2 minutes

### No Media Appears

**Checklist**:
1. âœ… Did you check the generation boxes?
2. âœ… Did you select a mood?
3. âœ… Did you submit the post (not just save draft)?
4. âœ… Did you wait for generation to complete?
5. âœ… Check browser console for errors (F12)

## ðŸŽ¯ Advanced Usage

### Mood Strategy by Game Type

**Dark Fantasy Campaign**:
- Primary: Mysterious, Horrific, Dramatic
- Occasional: Epic (for victories)

**Heroic Adventure**:
- Primary: Epic, Action, Peaceful
- Occasional: Humorous (for relief)

**Political Intrigue**:
- Primary: Dramatic, Mysterious
- Occasional: Romantic (for personal moments)

### Consistency Across Posts

For visual consistency in a scene sequence:
1. Use the same mood for consecutive posts in the same location
2. Mention the same location name consistently
3. Describe lighting/weather the same way
4. Character portraits (coming soon) will help maintain character consistency

### When NOT to Auto-Generate

Consider manual generation or no generation for:
- Abstract philosophical discussions
- Out-of-character (OOC) posts
- Meta-game planning
- Very short posts (<20 words)
- Posts without visual/audio elements

## ðŸ“Š Technical Details

### API Endpoint
```
POST /api/posts/derive-prompts
```

### Request Body
```json
{
  "postContent": "Soturi taistelee lohikÃ¤Ã¤rmettÃ¤ vastaan",
  "mood": "action",
  "language": "fi"
}
```

### Response
```json
{
  "imagePrompt": "warrior fighting dragon in castle",
  "audioPrompt": "epic battle sounds with orchestral music",
  "stylePreset": "cinematic",
  "audioType": "music",
  "audioStyle": "orchestral"
}
```

### Mood-to-Style Mapping

| Mood | Image Style | Audio Type | Audio Style |
|------|-------------|------------|-------------|
| peaceful | digital-art | ambient | acoustic |
| mysterious | fantasy-art | ambient | dark |
| action | cinematic | music | orchestral |
| dramatic | 3d-model | music | orchestral-dark |
| humorous | comic-book | music | whimsical |
| epic | cinematic | music | orchestral-epic |
| romantic | anime | music | emotional |
| horrific | horror-art | ambient | horror |

### Image Generation
- **Model**: Stability AI SD 3.5 Medium
- **Resolution**: 768x1152 (portrait, 2:3 aspect ratio)
- **Format**: JPEG
- **Storage**: AWS S3 (bucket: kuvatjakalat)

### Audio Generation
- **Service**: Custom audio generation API
- **Duration**: Typically 30-60 seconds
- **Format**: MP3
- **Storage**: AWS S3 (bucket: kuvatjakalat)

## ðŸ†˜ Getting Help

If you encounter issues:

1. **Check Console**: Press F12, look for errors in Console tab
2. **Server Logs**: Contact admin to check server logs
3. **Report Bug**: Include:
   - Post content you tried
   - Selected mood
   - What happened vs. what you expected
   - Browser console errors
   - Time of attempt

## ðŸ”® Coming Soon

Features in development:
- **Character portrait integration**: Reference specific character images for consistency
- **Prompt preview**: See derived prompts before generation
- **Custom style presets**: Save your favorite mood combinations
- **Batch generation**: Generate media for multiple posts at once
- **Generation history**: Review and reuse previous generations

---

**Last Updated**: October 2025
**Version**: 1.0
**Feature**: Auto-Media Generation System

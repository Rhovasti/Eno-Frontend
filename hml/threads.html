<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <title>Pelisivusto - Langat</title>
    <link rel="stylesheet" href="/css/styles.css">
    <style>
        #userControls {
            display: flex;
            align-items: center;
            margin-left: 20px;
        }
        
        #userInfo {
            margin-right: 15px;
        }
        
        .user-badge {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 12px;
            font-size: 12px;
            color: white;
            margin-left: 5px;
        }
        
        .admin-badge {
            background-color: #dc3545;
        }
        
        .gm-badge {
            background-color: #007bff;
        }
        
        .player-badge {
            background-color: #28a745;
        }
        
        .btn {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            color: white;
        }
        
        .btn-login {
            background-color: #007bff;
        }
        
        .btn-logout {
            background-color: #dc3545;
        }
    </style>
</head>
<body>
    <header>
        <h1>Pelisivusto</h1>
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <nav>
                <a href="/">Etusivu</a>
                <a href="/threads.html">Langat</a>
                <a href="/storyboard.html">Storyboard</a>
                <a href="/wiki.html">Wiki</a>
            </nav>
            <div id="userControls">
                <div id="userInfo" style="display: none;">
                    <span>Tervetuloa, <span id="username"></span></span>
                    <span id="userEmail" style="margin-left: 5px; font-size: 12px; color: #666;"></span>
                    <span id="userBadges"></span>
                </div>
                <button id="loginBtn" class="btn btn-login">Kirjaudu sisään</button>
                <button id="logoutBtn" class="btn btn-logout" style="display: none;">Kirjaudu ulos</button>
            </div>
        </div>
    </header>

    <div class="container">
        <h2>Langat</h2>

        <select id="gameSelect">
            <option value="">Valitse peli</option>
        </select>

        <select id="chapterSelect" disabled>
            <option value="">Valitse Luku</option>
        </select>

        <button id="createChapterButton" disabled>Luo Uusi Luku</button>
        <button id="archiveChapterButton" disabled>Arkistoi Luku</button>

        <div id="newChapterForm" style="display:none;">
            <h3>Luo Uusi Luku</h3>
            <form id="createChapterForm">
                <input type="text" id="chapterTitle" placeholder="Luvun otsikko" required>
                <textarea id="chapterDescription" placeholder="Luvun kuvaus"></textarea>
                <button type="submit">Luo Luku</button>
            </form>
        </div>

        <select id="beatSelect" disabled>
            <option value="">Valitse Beatti</option>
        </select>

        <button id="createBeatButton" disabled>Luo Uusi Beatti</button>

        <div id="newBeatForm" style="display:none;">
            <h3>Luo Uusi Beatti</h3>
            <form id="createBeatForm">
                <input type="text" id="beatTitle" placeholder="Beatin otsikko" required>
                <textarea id="beatContent" placeholder="Beatin sisältö" required></textarea>
                <button type="submit">Luo Beatti</button>
            </form>
        </div>

        <div id="postsContainer"></div>

        <div id="newPostForm" style="display:none;">
            <h3>Luo uusi viesti</h3>
            <form id="createPostForm">
                <input type="text" id="postTitle" placeholder="Viestin otsikko" required>
                <textarea id="postContent" placeholder="Viestin sisältö" required></textarea>
                <label>
                    <input type="checkbox" id="isGMPost"> Post as Game Master
                </label>
                <label id="archiveChapterLabel" style="display:none; margin-top: 10px;">
                    <input type="checkbox" id="archiveChapterOnPost"> Archive this chapter after posting
                </label>
                <button type="submit">Lähetä</button>
            </form>
        </div>
    </div>

    <script src="/js/script.js"></script>
    <script src="/js/threads.js"></script>
</body>
</html>